{
  "builders": [
    {
      "name": "debian-v7-base-vm-{{timestamp}}",
      "type": "virtualbox-iso",

      "iso_checksum": "9bc3493d8f4a84093fe8bd28551ece05d0145fc467070dd411f495fde40a10d32f144e2828ebf2f892e29d2f36543f9ccdc9bb479869c7425e725140390869a3",
      "iso_checksum_type": "sha512",
      "iso_url": "http://mirror.rit.edu/debian-cd/7.4.0/amd64/iso-cd/debian-7.4.0-amd64-CD-1.iso",
      "ssh_username": "{{user `vm_username`}}",

      "boot_command": [
        "<enter>",
        "<wait5>",
        "<enter><wait><enter><wait><enter>",
        "<wait10><wait10><wait10><wait10><wait5>",
        "<bs><bs><bs><bs><bs><bs>{{user `vm_hostname`}}<enter>",
        "<wait>",
        "{{user `vm_domain_name`}}<enter>",
        "<wait5>",
        "{{user `vm_password`}}<enter>",
        "<wait>",
        "{{user `vm_password`}}<enter>",
        "<wait>",
        "{{user `vm_full_name`}}<enter>",
        "<wait>",
        "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>{{user `vm_username`}}<enter>",
        "<wait>",
        "{{user `vm_password`}}<enter>",
        "<wait>",
        "{{user `vm_password`}}<enter>",
        "<wait5>",
        "<enter>",
        "<wait10>",
        "<down><down><down><enter>",
        "<wait>",
        "<down><down><enter>",
        "<wait>",
        "<left><enter>",
        "<wait>",
        "<down><enter>",
        "<wait>",
        "<enter>",
        "<wait>",
        "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>{{user `vm_fs_partition_size_root`}}<enter>",
        "<wait>",
        "<enter>",
        "<wait>",
        "<enter>",
        "<wait5>",
        "<down><down><down><down><down><down><down><down><down><down><down><enter>",
        "<wait>",
        "<down><enter>",
        "<wait>",
        "<enter>",
        "<wait>",
        "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>{{user `vm_fs_partition_size_home`}}<enter>",
        "<wait>",
        "<enter>",
        "<wait>",
        "<enter>",
        "<wait5>",
        "<down><down><down><down><down><down><down><down><down><down><down><enter>",
        "<wait>",
        "<down><enter>",
        "<wait>",
        "<enter>",
        "<wait>",
        "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>{{user `vm_fs_partition_size_usr`}}<enter>",
        "<wait>",
        "<enter>",
        "<wait>",
        "<enter>",
        "<wait5>",
        "<down><down><down><down><down><down><down><down><down><down><down><enter>",
        "<wait>",
        "<down><enter>",
        "<wait>",
        "<enter>",
        "<wait>",
        "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>{{user `vm_fs_partition_size_tmp`}}<enter>",
        "<wait>",
        "<enter>",
        "<wait>",
        "<enter>",
        "<wait5>",
        "<down><down><enter>",
        "<wait>",
        "<down><down><down><enter>",
        "<wait>",
        "<down><down><down><down><down><down><down><down><down><enter>",
        "<wait>",
        "<down><enter>",
        "<wait>",
        "<enter>",
        "<wait>",
        "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>{{user `vm_fs_partition_size_swap`}}<enter>",
        "<wait>",
        "<enter>",
        "<wait>",
        "<enter>",
        "<wait5>",
        "<enter>",
        "<wait>",
        "<down><down><down><down><down><down><down><down><enter>",
        "<wait>",
        "<down><down><down><down><down><down><enter>",
        "<wait>",
        "<down><enter>",
        "<wait>",
        "<enter>",
        "<wait>",
        "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>{{user `vm_fs_partition_size_var`}}<enter>",
        "<wait>",
        "<enter>",
        "<wait5>",
        "<down><down><down><down><down><down><down><down><down><down><down><enter>",
        "<wait>",
        "<down><down><down><enter>",
        "<wait5>",
        "<left><enter>",
        "<wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait5>",
        "<enter>",
        "<wait>",
        "<right><enter>",
        "<wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10>",
        "<enter>",
        "<wait5>",
        "<spacebar><enter>",
        "<wait10><wait10><wait10><wait10><wait5>",
        "<enter>",
        "<wait10>",
        "<enter>",
        "<wait10><wait10><wait10>",
        "{{user `vm_username`}}<enter>",
        "<wait>",
        "{{user `vm_password`}}<enter>",
        "<wait5>",
        "su -<enter>",
        "<wait>",
        "{{user `vm_password`}}<enter>",
        "<wait>",
        "> {{user `vm_debian_apt_sources_list_location`}}<enter>",
        "<wait>",
        "echo -e \"deb http://ftp.us.debian.org/debian stable main\\n\" >> {{user `vm_debian_apt_sources_list_location`}}<enter>",
        "<wait>",
        "echo -e \"deb-src http://ftp.us.debian.org/debian stable main\\n\" >> {{user `vm_debian_apt_sources_list_location`}}<enter>",
        "<wait>",
        "echo -e \"\\n\" >> {{user `vm_debian_apt_sources_list_location`}}<enter>",
        "<wait>",
        "echo -e \"deb http://ftp.debian.org/debian/ wheezy-updates main\\n\" >> {{user `vm_debian_apt_sources_list_location`}}<enter>",
        "<wait>",
        "echo -e \"deb-src http://ftp.debian.org/debian/ wheezy-updates main\\n\" >> {{user `vm_debian_apt_sources_list_location`}}<enter>",
        "<wait>",
        "echo -e \"\\n\" >> {{user `vm_debian_apt_sources_list_location`}}<enter>",
        "<wait>",
        "echo -e \"deb http://security.debian.org/ wheezy/updates main\\n\" >> {{user `vm_debian_apt_sources_list_location`}}<enter>",
        "<wait>",
        "echo -e \"deb-src http://security.debian.org/ wheezy/updates main\\n\" >> {{user `vm_debian_apt_sources_list_location`}}<enter>",
        "<wait>",
        "aptitude update<enter>",
        "<wait10><wait10><wait10>",
        "aptitude install sudo<enter>",
        "<wait10><wait5>",
        "adduser {{user `vm_username`}} sudo<enter>",
        "<wait5>",
        "exit<enter>",
        "<wait>",
        "exit<enter>",
        "<wait>",
        "{{user `vm_username`}}<enter>",
        "<wait>",
        "{{user `vm_password`}}<enter>",
        "<wait5>",
        "echo -e \"{{user `vm_password`}}\\n\" | sudo -S aptitude install openssh-server<enter>",
        "<wait10>"
      ],

      "boot_wait": "5s",
      "disk_size": 32768,
      "format": "ova",
      "guest_os_type": "Debian_64",
      "shutdown_command": "echo -e \"{{user `vm_password`}}\\n\" | sudo -S shutdown -h now",
      "ssh_password": "{{user `vm_password`}}",

      "vboxmanage": [
        [
          "modifyvm",
          "{{.Name}}",
          "--accelerate3d",
          "off"
        ],

        [
          "modifyvm",
          "{{.Name}}",
          "--cpus",
          "1"
        ],

        [
          "modifyvm",
          "{{.Name}}",
          "--memory",
          "1024"
        ],

        [
          "modifyvm",
          "{{.Name}}",
          "--vtxvpid",
          "off"
        ]
      ]
    }
  ],

  "variables": {
    "vm_debian_apt_sources_list_location": "/etc/apt/sources.list",
    "vm_domain_name": "terminator.dev",
    "vm_full_name": "Terminator Commander",
    "vm_fs_partition_size_home": "4 GB",
    "vm_fs_partition_size_root": "2 GB",
    "vm_fs_partition_size_swap": "2.5 GB",
    "vm_fs_partition_size_tmp": "2 GB",
    "vm_fs_partition_size_usr": "10 GB",
    "vm_fs_partition_size_var": "max",
    "vm_hostname": "terminator",
    "vm_password": "beawesome",
    "vm_username": "commander"
  }
}
